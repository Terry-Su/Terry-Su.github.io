<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="description" content=" Geometry Algorithms in Javascript Recently, I've been learning geo algorithms for developing a geometry library. However, I found that... (Terry Su Blog)">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Geometry Algorithms in Javascript(Terry Su Blog)</title>
    <style>
html,body,#root {
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
}
      </style>
    <style data-styled="jUTozv kJAupo gJHHmf ePLaqF hnVjwB kPWjyu dtTnrN hRNzSz  fojmjn imdmvu igoLLu fQwvIn" data-styled-version="4.1.3">
/* sc-component-id: sc-global-761255019 */
.markdown-body .highlight pre,.markdown-body pre{background:hsl(24,39%,99%)!important;} .markdown-body .highlight pre .token.operator,.markdown-body pre .token.operator{background:none;} .markdown-body iframe{width:100%;height:300px;border:none;} .markdown-body .octicon{display:inline-block;fill:currentColor;vertical-align:text-bottom;} .markdown-body .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px;} .markdown-body .anchor:focus{outline:none;} .markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden;} .markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{-webkit-text-decoration:none;text-decoration:none;} .markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible;} .markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;line-height:1.5;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial, sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-size:16px;line-height:1.5;word-wrap:break-word;} .markdown-body .pl-c{color:#6a737d;} .markdown-body .pl-c1,.markdown-body .pl-s .pl-v{color:#005cc5;} .markdown-body .pl-e,.markdown-body .pl-en{color:#6f42c1;} .markdown-body .pl-s .pl-s1,.markdown-body .pl-smi{color:#24292e;} .markdown-body .pl-ent{color:#22863a;} .markdown-body .pl-k{color:#d73a49;} .markdown-body .pl-pds,.markdown-body .pl-s,.markdown-body .pl-s .pl-pse .pl-s1,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre{color:#032f62;} .markdown-body .pl-smw,.markdown-body .pl-v{color:#e36209;} .markdown-body .pl-bu{color:#b31d28;} .markdown-body .pl-ii{background-color:#b31d28;color:#fafbfc;} .markdown-body .pl-c2{background-color:#d73a49;color:#fafbfc;} .markdown-body .pl-c2:before{content:"^M";} .markdown-body .pl-sr .pl-cce{color:#22863a;font-weight:700;} .markdown-body .pl-ml{color:#735c0f;} .markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{color:#005cc5;font-weight:700;} .markdown-body .pl-mi{color:#24292e;font-style:italic;} .markdown-body .pl-mb{color:#24292e;font-weight:700;} .markdown-body .pl-md{background-color:#ffeef0;color:#b31d28;} .markdown-body .pl-mi1{background-color:#f0fff4;color:#22863a;} .markdown-body .pl-mc{background-color:#ffebda;color:#e36209;} .markdown-body .pl-mi2{background-color:#005cc5;color:#f6f8fa;} .markdown-body .pl-mdr{color:#6f42c1;font-weight:700;} .markdown-body .pl-ba{color:#586069;} .markdown-body .pl-sg{color:#959da5;} .markdown-body .pl-corl{color:#032f62;-webkit-text-decoration:underline;text-decoration:underline;} .markdown-body details{display:block;} .markdown-body summary{display:list-item;} .markdown-body a{background-color:transparent;} .markdown-body a:active,.markdown-body a:hover{outline-width:0;} .markdown-body strong{font-weight:inherit;font-weight:bolder;} .markdown-body h1{font-size:2em;margin:0.67em 0;} .markdown-body img{border-style:none;} .markdown-body code,.markdown-body kbd,.markdown-body pre{font-family:monospace,monospace;font-size:1em;} .markdown-body hr{box-sizing:content-box;height:0;overflow:visible;} .markdown-body input{font:inherit;margin:0;} .markdown-body input{overflow:visible;} .markdown-body [type="checkbox"]{box-sizing:border-box;padding:0;} .markdown-body *{box-sizing:border-box;} .markdown-body input{font-family:inherit;font-size:inherit;line-height:inherit;} .markdown-body a{color:#0366d6;-webkit-text-decoration:none;text-decoration:none;} .markdown-body a:hover{-webkit-text-decoration:underline;text-decoration:underline;} .markdown-body strong{font-weight:600;} .markdown-body hr{background:0 0;border:0;border-bottom:1px solid #dfe2e5;height:0;margin:15px 0;overflow:hidden;} .markdown-body hr:before{content:"";display:table;} .markdown-body hr:after{clear:both;content:"";display:table;} .markdown-body table{border-collapse:collapse;border-spacing:0;} .markdown-body td,.markdown-body th{padding:0;} .markdown-body details summary{cursor:pointer;} .markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-bottom:0;margin-top:0;} .markdown-body h1{font-size:32px;} .markdown-body h1,.markdown-body h2{font-weight:600;} .markdown-body h2{font-size:24px;} .markdown-body h3{font-size:20px;} .markdown-body h3,.markdown-body h4{font-weight:600;} .markdown-body h4{font-size:16px;} .markdown-body h5{font-size:14px;} .markdown-body h5,.markdown-body h6{font-weight:600;} .markdown-body h6{font-size:12px;} .markdown-body p{margin-bottom:10px;margin-top:0;} .markdown-body blockquote{margin:0;} .markdown-body ol,.markdown-body ul{margin-bottom:0;margin-top:0;padding-left:0;} .markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman;} .markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha;} .markdown-body dd{margin-left:0;} .markdown-body code,.markdown-body pre{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier, monospace;font-size:12px;} .markdown-body pre{margin-bottom:0;margin-top:0;} .markdown-body input::-webkit-inner-spin-button,.markdown-body input::-webkit-outer-spin-button{-webkit-appearance:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;margin:0;} .markdown-body .border{border:1px solid #e1e4e8 !important;} .markdown-body .border-0{border:0 !important;} .markdown-body .border-bottom{border-bottom:1px solid #e1e4e8 !important;} .markdown-body .rounded-1{border-radius:3px !important;} .markdown-body .bg-white{background-color:#fff !important;} .markdown-body .bg-gray-light{background-color:#fafbfc !important;} .markdown-body .text-gray-light{color:#6a737d !important;} .markdown-body .mb-0{margin-bottom:0 !important;} .markdown-body .my-2{margin-bottom:8px !important;margin-top:8px !important;} .markdown-body .pl-0{padding-left:0 !important;} .markdown-body .py-0{padding-bottom:0 !important;padding-top:0 !important;} .markdown-body .pl-1{padding-left:4px !important;} .markdown-body .pl-2{padding-left:8px !important;} .markdown-body .py-2{padding-bottom:8px !important;padding-top:8px !important;} .markdown-body .pl-3,.markdown-body .px-3{padding-left:16px !important;} .markdown-body .px-3{padding-right:16px !important;} .markdown-body .pl-4{padding-left:24px !important;} .markdown-body .pl-5{padding-left:32px !important;} .markdown-body .pl-6{padding-left:40px !important;} .markdown-body .f6{font-size:12px !important;} .markdown-body .lh-condensed{line-height:1.25 !important;} .markdown-body .text-bold{font-weight:600 !important;} .markdown-body:before{content:"";display:table;} .markdown-body:after{clear:both;content:"";display:table;} .markdown-body > :first-child{margin-top:0 !important;} .markdown-body > :last-child{margin-bottom:0 !important;} .markdown-body a:not([href]){color:inherit;-webkit-text-decoration:none;text-decoration:none;} .markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-bottom:16px;margin-top:0;} .markdown-body hr{background-color:#e1e4e8;border:0;height:0.25em;margin:24px 0;padding:0;} .markdown-body blockquote{border-left:0.25em solid #dfe2e5;color:#6a737d;padding:0 1em;} .markdown-body blockquote > :first-child{margin-top:0;} .markdown-body blockquote > :last-child{margin-bottom:0;} .markdown-body kbd{background-color:#fafbfc;border:1px solid #c6cbd1;border-bottom-color:#959da5;border-radius:3px;box-shadow:inset 0 -1px 0 #959da5;color:#444d56;display:inline-block;font-size:11px;line-height:10px;padding:3px 5px;vertical-align:middle;} .markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:600;line-height:1.25;margin-bottom:16px;margin-top:24px;} .markdown-body h1{font-size:2em;} .markdown-body h1,.markdown-body h2{border-bottom:1px solid #eaecef;padding-bottom:0.3em;} .markdown-body h2{font-size:1.5em;} .markdown-body h3{font-size:1.25em;} .markdown-body h4{font-size:1em;} .markdown-body h5{font-size:0.875em;} .markdown-body h6{color:#6a737d;font-size:0.85em;} .markdown-body ol,.markdown-body ul{padding-left:2em;} .markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-bottom:0;margin-top:0;} .markdown-body li{word-wrap:break-all;} .markdown-body li > p{margin-top:16px;} .markdown-body li + li{margin-top:0.25em;} .markdown-body dl{padding:0;} .markdown-body dl dt{font-size:1em;font-style:italic;font-weight:600;margin-top:16px;padding:0;} .markdown-body dl dd{margin-bottom:16px;padding:0 16px;} .markdown-body table{display:block;overflow:auto;width:100%;} .markdown-body table th{font-weight:600;} .markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:6px 13px;} .markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1;} .markdown-body table tr:nth-child(2n){background-color:#f6f8fa;} .markdown-body img{background-color:#fff;box-sizing:content-box;max-width:100%;} .markdown-body img[align="right"]{padding-left:20px;} .markdown-body img[align="left"]{padding-right:20px;} .markdown-body code{background-color:rgba(27,31,35,0.05);border-radius:3px;font-size:85%;margin:0;padding:0.2em 0.4em;} .markdown-body pre{word-wrap:normal;} .markdown-body pre > code{background:0 0;border:0;font-size:100%;margin:0;padding:0;white-space:pre;word-break:normal;} .markdown-body .highlight{margin-bottom:16px;} .markdown-body .highlight pre{margin-bottom:0;word-break:normal;} .markdown-body .highlight pre,.markdown-body pre{border-radius:3px;font-size:85%;line-height:1.45;overflow:auto;padding:16px;} .markdown-body pre code{border:0;display:inline;line-height:inherit;margin:0;max-width:auto;overflow:visible;padding:0;word-wrap:normal;} .markdown-body .commit-tease-sha{color:#444d56;display:inline-block;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier, monospace;font-size:90%;} .markdown-body .blob-wrapper{border-bottom-left-radius:3px;border-bottom-right-radius:3px;overflow-x:auto;overflow-y:hidden;} .markdown-body .blob-wrapper-embedded{max-height:240px;overflow-y:auto;} .markdown-body .blob-num{-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;color:rgba(27,31,35,0.3);cursor:pointer;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier, monospace;font-size:12px;line-height:20px;min-width:50px;padding-left:10px;padding-right:10px;text-align:right;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:top;white-space:nowrap;width:1%;} .markdown-body .blob-num:hover{color:rgba(27,31,35,0.6);} .markdown-body .blob-num:before{content:attr(data-line-number);} .markdown-body .blob-code{line-height:20px;padding-left:10px;padding-right:10px;position:relative;vertical-align:top;} .markdown-body .blob-code-inner{color:#24292e;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier, monospace;font-size:12px;overflow:visible;white-space:pre;word-wrap:normal;} .markdown-body .pl-token.active,.markdown-body .pl-token:hover{background:#ffea7f;cursor:pointer;} .markdown-body kbd{background-color:#fafbfc;border:1px solid #d1d5da;border-bottom-color:#c6cbd1;border-radius:3px;box-shadow:inset 0 -1px 0 #c6cbd1;color:#444d56;display:inline-block;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier, monospace;line-height:10px;padding:3px 5px;vertical-align:middle;} .markdown-body :checked + .radio-label{border-color:#0366d6;position:relative;z-index:1;} .markdown-body .tab-size[data-tab-size="1"]{-moz-tab-size:1;tab-size:1;} .markdown-body .tab-size[data-tab-size="2"]{-moz-tab-size:2;tab-size:2;} .markdown-body .tab-size[data-tab-size="3"]{-moz-tab-size:3;tab-size:3;} .markdown-body .tab-size[data-tab-size="4"]{-moz-tab-size:4;tab-size:4;} .markdown-body .tab-size[data-tab-size="5"]{-moz-tab-size:5;tab-size:5;} .markdown-body .tab-size[data-tab-size="6"]{-moz-tab-size:6;tab-size:6;} .markdown-body .tab-size[data-tab-size="7"]{-moz-tab-size:7;tab-size:7;} .markdown-body .tab-size[data-tab-size="8"]{-moz-tab-size:8;tab-size:8;} .markdown-body .tab-size[data-tab-size="9"]{-moz-tab-size:9;tab-size:9;} .markdown-body .tab-size[data-tab-size="10"]{-moz-tab-size:10;tab-size:10;} .markdown-body .tab-size[data-tab-size="11"]{-moz-tab-size:11;tab-size:11;} .markdown-body .tab-size[data-tab-size="12"]{-moz-tab-size:12;tab-size:12;} .markdown-body .task-list-item{list-style-type:none;} .markdown-body .task-list-item + .task-list-item{margin-top:3px;} .markdown-body .task-list-item input{margin:0 0.2em 0.25em -1.6em;vertical-align:middle;} .markdown-body hr{border-bottom-color:#eee;} .markdown-body .pl-0{padding-left:0 !important;} .markdown-body .pl-1{padding-left:4px !important;} .markdown-body .pl-2{padding-left:8px !important;} .markdown-body .pl-3{padding-left:16px !important;} .markdown-body .pl-4{padding-left:24px !important;} .markdown-body .pl-5{padding-left:32px !important;} .markdown-body .pl-6{padding-left:40px !important;} .markdown-body .pl-7{padding-left:48px !important;} .markdown-body .pl-8{padding-left:64px !important;} .markdown-body .pl-9{padding-left:80px !important;} .markdown-body .pl-10{padding-left:96px !important;} .markdown-body .pl-11{padding-left:112px !important;} .markdown-body .pl-12{padding-left:128px !important;} code[class*="language-"],pre[class*="language-"]{color:black;background:none;text-shadow:0 1px white;font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;} pre[class*="language-"]::-moz-selection,pre[class*="language-"] ::-moz-selection,code[class*="language-"]::-moz-selection,code[class*="language-"] ::-moz-selection{text-shadow:none;background:#b3d4fc;} pre[class*="language-"]::selection,pre[class*="language-"] ::selection,code[class*="language-"]::selection,code[class*="language-"] ::selection{text-shadow:none;background:#b3d4fc;} @media print{code[class*="language-"],pre[class*="language-"]{text-shadow:none;}} pre[class*="language-"]{padding:1em;margin:.5em 0;overflow:auto;} :not(pre) > code[class*="language-"],pre[class*="language-"]{background:#f5f2f0;} :not(pre) > code[class*="language-"]{padding:.1em;border-radius:.3em;white-space:normal;} .token.comment,.token.prolog,.token.doctype,.token.cdata{color:slategray;} .token.punctuation{color:#999;} .namespace{opacity:.7;} .token.property,.token.tag,.token.boolean,.token.number,.token.constant,.token.symbol,.token.deleted{color:#905;} .token.selector,.token.attr-name,.token.string,.token.char,.token.builtin,.token.inserted{color:#690;} .token.operator,.token.entity,.token.url,.language-css .token.string,.style .token.string{color:#9a6e3a;background:hsla(0,0%,100%,.5);} .token.atrule,.token.attr-value,.token.keyword{color:#07a;} .token.function,.token.class-name{color:#DD4A68;} .token.regex,.token.important,.token.variable{color:#e90;} .token.important,.token.bold{font-weight:bold;} .token.italic{font-style:italic;} .token.entity{cursor:help;}
/* sc-component-id: sc-bwzfXH */
.hRNzSz{width:100%;height:100%;} .hRNzSz .markdown-body{width:100%;height:100%;}
/* sc-component-id: sc-bxivhb */
.fQwvIn{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:70px;background:#182633;} .fQwvIn > .contentWrapper{color:rgba(255,255,255,0.5);font-size:14px;} .fQwvIn > .contentWrapper > .authorLink{margin:0 6px;color:#19affc;}
/* sc-component-id: sc-ifAKCX */
.gJHHmf{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:space-around;-webkit-justify-content:space-around;-ms-flex-pack:space-around;justify-content:space-around;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:"100%";height:118px;}
/* sc-component-id: sc-EHOje */
.ePLaqF{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:0;} .ePLaqF > .logoTitle{margin:10px;font-size:18px;font-weight:bold;-webkit-letter-spacing:0px;-moz-letter-spacing:0px;-ms-letter-spacing:0px;letter-spacing:0px;color:#555;}
/* sc-component-id: sc-bZQynM */
.hnVjwB{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}
/* sc-component-id: sc-gzVnrw */
.kPWjyu{color:#aaa;-webkit-letter-spacing:1px;-moz-letter-spacing:1px;-ms-letter-spacing:1px;letter-spacing:1px;} .kPWjyu:hover{color:#888;} .kPWjyu a{font-size:16px;color:unset;-webkit-text-decoration:none;text-decoration:none;margin:0 10px;}
/* sc-component-id: sc-global-3351692418 */
html,body{width:100%;height:100%;margin:0;padding:0;} body{font-size:'16px';font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;background:hsl(27,39%,95%);}
/* sc-component-id: sc-iwsKbI */
.dtTnrN > .wrapper{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;} .dtTnrN > .wrapper > .contentWrapper{width:700px;} .dtTnrN > .wrapper > .contentWrapper > .titleWrapper{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:42px;font-weight:bold;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;} .dtTnrN > .wrapper > .contentWrapper > .isAutoTranslatedWrapper{margin:40px 0 0 0;} .dtTnrN > .wrapper > .contentWrapper > .markdownWrapper{margin:40px 0 0 0;}
/* sc-component-id: sc-gZMcBi */
.fojmjn{margin-top:80px;padding-top:80px;border-top:1px solid #ddd;} .fojmjn > .imageWrapper{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;} .fojmjn > .imageWrapper > img{max-width:100%;}
/* sc-component-id: sc-gqjmRU */
.imdmvu{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;margin:40px 0 0 0;} .imdmvu > .categoryWrapper{margin:10px 0 0 0;} .imdmvu > .reprintingNoteWrapper{margin:10px 0 0 0;}
/* sc-component-id: sc-VigVT */
.igoLLu{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:100%;margin:80px 0 0 0;padding:40px 0;} .igoLLu > .wrapper{width:700px;} .igoLLu > .wrapper > .disqusCommentWrapper{padding:0;}
/* sc-component-id: sc-kpOJdX */
.jUTozv{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}
/* sc-component-id: sc-dxgOiQ */
.kJAupo{visibility:visible;}</style>
  </head>
  <body>
    <div id="root"><div style="width:100%;height:100%"><div style="width:100%;height:100%"><div style="position:absolute;right:40px;top:20px"><div><div></div></div></div><div class="sc-ifAKCX gJHHmf"><span><a href="/" style="color:unset;text-decoration:none"><div class="sc-EHOje ePLaqF"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjIxMnB4IiBoZWlnaHQ9IjE0NnB4IiB2aWV3Qm94PSIwIDAgMjEyIDE0NiIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNTAuMiAoNTUwNDcpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPgogICAgPHRpdGxlPnRzPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9InRzIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNjcuMDAwMDAwLCAtMzMuMDAwMDAwKSI+CiAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtMiIgZmlsbC1vcGFjaXR5PSIwIiBmaWxsPSIjRDhEOEQ4IiB4PSI2OCIgeT0iMSIgd2lkdGg9IjIxMCIgaGVpZ2h0PSIyMTAiPjwvcmVjdD4KICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZSIgZmlsbD0iIzFCQzJGQSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTc2LjAwMDAwMCwgMTA1LjAwMDAwMCkgcm90YXRlKDE1LjAwMDAwMCkgdHJhbnNsYXRlKC0xNzYuMDAwMDAwLCAtMTA1LjAwMDAwMCkgIiB4PSIxNDYiIHk9IjEwMSIgd2lkdGg9IjYwIiBoZWlnaHQ9IjgiPjwvcmVjdD4KICAgICAgICAgICAgPHRleHQgaWQ9IlMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2OS4xMDE0OTgsIDk5LjMyODM4MSkgcm90YXRlKC0yNzAuMDAwMDAwKSB0cmFuc2xhdGUoLTE2OS4xMDE0OTgsIC05OS4zMjgzODEpICIgZm9udC1mYW1pbHk9IlJvYm90by1UaGluLCBSb2JvdG8iIGZvbnQtc2l6ZT0iMjg4IiBmb250LXN0eWxlPSJjb25kZW5zZWQiIGZvbnQtd2VpZ2h0PSIzMDAiIGZpbGw9IiMxQkMyRkEiPgogICAgICAgICAgICAgICAgPHRzcGFuIHg9Ijg5LjQyOTg3OTMiIHk9IjE5Ny44MjgzODEiPlM8L3RzcGFuPgogICAgICAgICAgICA8L3RleHQ+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=" height="30"/><span class="logoTitle">Terry Su</span></div></a></span><div class="sc-bZQynM hnVjwB"><div class="sc-gzVnrw kPWjyu"><a href="/" style="color:unset;text-decoration:none">ARTICLES</a></div><div class="sc-gzVnrw kPWjyu"><a href="/about" style="color:unset;text-decoration:none">ABOUT</a></div><div class="sc-gzVnrw kPWjyu"><a href="https://github.com/Terry-Su/blogs">GITHUB</a></div></div></div><div style="margin:50px 0 0 0;min-height:calc(100% - 118px - 50px)"><div class="sc-iwsKbI dtTnrN"><div class="wrapper"><div class="contentWrapper"><span class="titleWrapper">Geometry Algorithms in Javascript</span><div class="markdownWrapper"><div class="markdown-body sc-bwzfXH hRNzSz"><div><div><div><p>Recently, I&#x27;ve been learning geo algorithms for developing a geometry library. However, I found that the materials of 2d geometry algorithms on the internet ara <strong>complicated</strong> and <strong>messy</strong> since I only want to find several basic and commonly used algorithms. Here, I will try my best to make 2d geometry algorithms below <strong>easy</strong> to be understood and used. </p><p>By the way, you may not be necessary to read this article paragraph by paragraph, you can just read any topic which you prefer. Here we go!</p><h3>Transformation</h3><h5>Translation</h5><p><img src="https://www.tutorialspoint.com/computer_graphics/images/translation.jpg" alt="Image"/><br/>
<!-- -->Suppose we move point&#x27;s position from <code>(x, y)</code> to <code>(x&#x27;, y&#x27;)</code>:</p><pre><code class="language-math">x &#x27; = x + t _ x
</code></pre><pre><code class="language-math">y &#x27; = y + t _ y
</code></pre><h5>Scale</h5><p><img src="https://www.tutorialspoint.com/computer_graphics/images/before_scaling.jpg" alt="Image"/><br/>
<img src="https://www.tutorialspoint.com/computer_graphics/images/after_scaling.jpg" alt="Image"/><br/>
<!-- -->Suppose we scale the <code>x</code> of point by <code>sx</code> times and the <code>y</code> of point by <code>sy</code> times, then:</p><pre><code class="language-math">x &#x27; = s _ x * x
</code></pre><pre><code class="language-math">y &#x27; = s _ y * y
</code></pre><blockquote><p><strong>Scale point based on a center point <code>(xc, yc)</code></strong></p><pre><code class="language-math">x &#x27; = s _ x * x - ( s _ x * x _ c - x _ c )
</code></pre><pre><code class="language-math">y &#x27; = s _ y * y - ( s _ y * y _ c - y _ c )
</code></pre></blockquote><h5>Rotation</h5><p><img src="https://www.tutorialspoint.com/computer_graphics/images/rotation.jpg" alt="Image"/><br/>
<!-- -->Suppose we rotate <code>OP</code> to <code>OP&#x27;</code>.<br/>
<!-- -->Because:</p><pre><code class="language-math">x = r \cdot cos \varphi
</code></pre><pre><code class="language-math">y = r \cdot sin \varphi
</code></pre><p>Then:</p><pre><code class="language-math">x&#x27; = r \cdot cos ( \varphi + \theta ) = r \cdot ( cos \varphi \cdot cos \theta - sin \varphi \cdot sin \theta ) = x \cdot cos \theta - y \cdot sin \theta
</code></pre><pre><code class="language-math">y&#x27; = r \cdot sin ( \varphi + \theta ) = r \cdot ( sin \varphi \cdot cos \theta + cos \varphi \cdot sin \theta ) = x \cdot sin \theta + y \cdot cos \theta
</code></pre><blockquote><p><strong>Rotate point based on a center point <code>(xc, yc)</code></strong></p><pre><code class="language-math">x&#x27; =  x \cdot cos \theta - y \cdot sin \theta + xc
</code></pre><pre><code class="language-math">y&#x27; = x \cdot sin \theta + y \cdot cos \theta + yc
</code></pre></blockquote><h3>Point in polygon</h3><p>In fact, there&#x27;re two well-known &quot;point in polygon&quot; algorithms: <strong>winding number</strong> and <strong>crossing number</strong>, however, I will only talk about <strong>winding number</strong>, here are reasons:</p><table><thead><tr><th>/</th><th>Rule</th><th>Suitable Scene</th></tr></thead><tbody><tr><td><strong>Winding</strong> number</td><td><a href="https://en.wikipedia.org/wiki/Nonzero-rule">Nonezero-rule</a></td><td>All polygons</td></tr><tr><td>Crossing Number</td><td><a href="https://en.wikipedia.org/wiki/Even%E2%80%93odd_rule">Even-odd rule</a></td><td>Polygons with simple curves</td></tr></tbody></table><p>As we can see above, <strong>crossing number</strong> is not suitable for all polygons.</p><h5>Winding number</h5><p><img src="https://upload.wikimedia.org/wikipedia/commons/8/8f/Winding_Number_Around_Point.svg" alt="Image"/><br/>
<!-- -->Draw an <strong>infinite ray</strong> from <code>P</code> crossing polygon, then count each <strong>vertex</strong>, here&#x27;s the key: suppose we start at any point on polygon path and end at the same point to draw polygon <strong>counterclockwise</strong>, if the <code>vector</code> intersected the <strong>special vertex</strong>(intersected by infinite ray and polygon) is <strong>upward</strong>, <code>wn</code> <strong>adds <code>1</code></strong>, otherwise if the track intersected vertex is <strong>downward</strong>, <code>wn</code> <strong>subtracts <code>1</code></strong>. If the <code>wn</code> of <code>P</code> is not <code>0</code>, then <code>P</code> is <strong>inside</strong> of polygon, otherwise <code>P</code> is <strong>outside</strong>.<br/>
<!-- -->Main javascript(typescript) <strong>codes</strong>(If you want to see whole detail code, visit <a href="https://github.com/Terry-Su/Geometry-Algorithm/blob/master/src/core/calcPointInPolygon.ts">here</a>):</p><pre><code class="language-ts">/**
 * Check if point P is inside of polygon with winding number algorithm
 * Algorithm: http://geomalgorithms.com/a03-_inclusion.html
 * @param {Point2D} P point P
 * @param {Point2D[]} polygonVertices vertices of polygon path in clockwise or counterclockwise order
 */
function pointInPolygonWindingNumber(
  P: Point2D,
  polygonVertices: Point2D[]
) {
  /**
   * Winding nunebr
   */
  let wn = 0

  const points: Point2D[] = polygonVertices

  for ( let i: number = 0; i &lt; points.length - 1; i++ ) {
    const V0: Point2D = points[ i ]
    const V1: Point2D = points[ i + 1 ]

    const { x: x0, y: y0 }: Point2D = V0
    const { x: x1, y: y1 }: Point2D = V1
    const { x: xp, y: yp }: Point2D = P

    /**
     * Upward
     */
    if ( y0 &lt;= yp &amp;&amp; y1 &gt; yp &amp;&amp; isLeft( V0, V1, P ) ) {
      wn = wn + 1
    }
    /**
     * Downward
     */
    if ( y0 &gt; yp &amp;&amp; y1 &lt;= yp &amp;&amp; isRight( V0, V1, P ) ) {
      wn = wn - 1
    }
  }

  const pointOnPolygonPath: boolean = isPointOnPolygonPath( P, points )
  const res: boolean = pointOnPolygonPath || wn !== 0

  return res
}
</code></pre><h3>Matrix</h3><p>I&#x27;m curious about matrices too, not only when learning geometry algorithms. Matrix, which like an magician, transforms geometry with its particular formula.</p><h5>Translation</h5><pre><code class="language-math">\begin{bmatrix}
   x&#x27; \\
   y&#x27;
\end{bmatrix}
=
\begin{bmatrix}
   x \\
   y
\end{bmatrix}
+
\begin{bmatrix}
   tx \\
   ty
\end{bmatrix}
</code></pre><h5>Scale</h5><pre><code class="language-math">\begin{bmatrix}
   x&#x27; \\
   y&#x27;
\end{bmatrix}
=
\begin{bmatrix}
   S _ x &amp; 0 \\
   0 &amp; S _ y
\end{bmatrix}
\begin{bmatrix}
   x \\
   y
\end{bmatrix}
</code></pre><h5>Rotation</h5><pre><code class="language-math">\begin{bmatrix}
   x&#x27; \\
   y&#x27;
\end{bmatrix}
=
\begin{bmatrix}
  cos \theta &amp; -sin \theta \\
  sin \theta &amp; cos \theta
\end{bmatrix}
\begin{bmatrix}
   x \\
   y
\end{bmatrix}
</code></pre><h3>Formulas</h3><p>There are plenty of geometry algorithms, however, I only list several alogorithms which are <strong>frequently used</strong> above. Maybe, I say maybe, I will add new algorithms in this blog if I find new commonly used algorithm in the future.
Nevertheless, I&#x27;ll still list some <strong>practical</strong> formulas which can be used for geometry calculation.</p><h5>The Cosine Law</h5><p>Suppose there are vector v and w</p><pre><code class="language-math">| v \pm w | ^ 2 = | v | ^ 2 \pm 2 | v | | w | cos( \theta ) + | w | ^ 2
</code></pre><h5>The Dot Product</h5><p>One vector multiply the other vector:</p><pre><code class="language-math">v \cdot w = | v | | w | cos ( \theta )
</code></pre><h5>The 2D Perp Product</h5><pre><code class="language-math">v \perp w = | v | | w | sin ( \theta )
</code></pre><h5>Computing area</h5><ul><li>Parallelogram</li></ul><pre><code class="language-math">A ( \Box ) = | v \perp w | 
</code></pre><pre><code class="language-math">    = |v| |w| sin( \theta )
</code></pre><ul><li>Triangles</li></ul><pre><code class="language-math">A ( \vartriangle ) = | v \perp w | / 2t
</code></pre><pre><code class="language-math">    = |v| |w| sin( \theta ) / 2
</code></pre><h5>Lines formula</h5><ul><li>Type-Parametric</li></ul><pre><code class="language-math">P(t) = P _ 0 + t v _ L 
</code></pre><ul><li>Line equations</li></ul><pre><code class="language-math">P ( t ) = P _ 0 + t v _ L 
</code></pre><pre><code class="language-math">    = P _ 0 + t ( P _ 1 - P _ 0 )
</code></pre><pre><code class="language-math">    = ( 1 - t ) P _ 0 + t P _ 1
</code></pre><pre><code class="language-math">    = ( x _ 0 + t cos \theta , y _ 0 + t sin \theta ) 
</code></pre><p>It&#x27;s easy to learn and use a geometry library, however, it&#x27;s <strong>limited</strong> when we want to build a <strong>large</strong> or complex even just <strong>a little complex project</strong>. Grasping geometry algorithms will make it possible for us to create <strong>flexible</strong> and <strong>large</strong> geometry projects.</p><h3>Reference</h3><p>[0]<!-- --> <strong>Transformation:</strong> <a href="https://www.tutorialspoint.com/computer_graphics/2d_transformation.htm">https://www.tutorialspoint.com/computer_graphics/2d_transformation.htm</a><br/>
<!-- -->[1]<!-- --> <strong>Point in polygon1:</strong> <a href="https://en.wikipedia.org/wiki/Point_in_polygon">https://en.wikipedia.org/wiki/Point_in_polygon</a><br/>
<!-- -->[2]<!-- --> <strong>Point in polygon2:</strong> <a href="http://geomalgorithms.com/a03-_inclusion.html">http://geomalgorithms.com/a03-_inclusion.html</a><br/>
<!-- -->[3]<!-- --> <strong>Nonezero-rule:</strong> <a href="https://en.wikipedia.org/wiki/Nonzero-rule">https://en.wikipedia.org/wiki/Nonzero-rule</a><br/>
<!-- -->[4]<!-- --> <strong>Even-odd rule:</strong> <a href="https://en.wikipedia.org/wiki/Even%E2%80%93odd_rule">https://en.wikipedia.org/wiki/Even%E2%80%93odd_rule</a><br/>
<!-- -->[5]<!-- --> <strong>Computing area:</strong> <a href="http://geomalgorithms.com/a01-_area.html">http://geomalgorithms.com/a01-_area.html</a><br/>
<!-- -->[6]<!-- --> <strong>Line formula:</strong> <a href="http://geomalgorithms.com/a02-_lines.html">http://geomalgorithms.com/a02-_lines.html</a>  </p></div></div></div></div></div><div class="markdown-body sc-gZMcBi fojmjn"><div><p><strong>Welcome to <a href="https://github.com/Terry-Su/blogs">star and subscribe</a>, to read my latest original front end technology blogs.</strong></p></div></div><div class="sc-gqjmRU imdmvu"><div>Post Time<!-- -->: <!-- -->2/12/2018</div><div class="categoryWrapper">Category<!-- -->: <!-- -->Technology/Algorithm</div><div class="reprintingNoteWrapper">Author all rights reserved reprint please indicate the source no commercial reprint</div></div></div></div><div class="sc-VigVT igoLLu"><div class="wrapper"><div><div style="width:100%"><div style="box-sizing:border-box;text-align:center"><a style="color:#4169e1;text-decoration:none" href="https://github.com/Terry-Su/blogs/issues/5">Comment (by Github Issues)</a></div><div style="padding:0"></div></div></div><div class="disqusCommentWrapper"><div><div id="disqus_thread"></div><noscript>Please enable JavaScript to view the<!-- --> <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></div></div></div></div></div><div class="sc-bxivhb fQwvIn"><span class="contentWrapper">Copyright © 2017-<!-- -->2019<a class="authorLink" href="https://github.com/Terry-Su">Terry Su</a>ALL RIGHTS RESERVED</span></div></div></div></div>
    <script src="/bundle.js"></script>
  
<script>

window.CURRENT_PAGE={"path":"/geometry-algorithms-in-javascript","data":{"pathnameRoot":"/","authorUrl":"https://github.com/Terry-Su","locale":"en","logoTitle":"Terry Su","noteIsAutoTranslated":"This page is translated automatically.","copyright":{"left":"Copyright © 2017-","center":"Terry Su","right":"ALL RIGHTS RESERVED"},"blogGithub":"https://github.com/Terry-Su/blogs","id":"geometry-algorithms-in-javascript","title":"Geometry Algorithms in Javascript","path":"Technology/Algorithm","route":"/geometry-algorithms-in-javascript","text":"\n\nconst layoutProps = {\n  \n};\nclass MDXContent extends React.Component {\n  constructor(props) {\n    super(props)\n    this.layout = null\n  }\n  render() {\n    const { components, ...props } = this.props\n\n    return <MDXTag\n             name=\"wrapper\"\n             \n             components={components}><MDXTag name=\"p\" components={components}>{`Recently, I've been learning geo algorithms for developing a geometry library. However, I found that the materials of 2d geometry algorithms on the internet ara `}<MDXTag name=\"strong\" components={components} parentName=\"p\">{`complicated`}</MDXTag>{` and `}<MDXTag name=\"strong\" components={components} parentName=\"p\">{`messy`}</MDXTag>{` since I only want to find several basic and commonly used algorithms. Here, I will try my best to make 2d geometry algorithms below `}<MDXTag name=\"strong\" components={components} parentName=\"p\">{`easy`}</MDXTag>{` to be understood and used. `}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`By the way, you may not be necessary to read this article paragraph by paragraph, you can just read any topic which you prefer. Here we go!`}</MDXTag>\n<MDXTag name=\"h3\" components={components}>{`Transformation`}</MDXTag>\n<MDXTag name=\"h5\" components={components}>{`Translation`}</MDXTag>\n<MDXTag name=\"p\" components={components}><MDXTag name=\"img\" components={components} parentName=\"p\" props={{\"src\":\"https://www.tutorialspoint.com/computer_graphics/images/translation.jpg\",\"alt\":\"Image\"}}></MDXTag><MDXTag name=\"br\" components={components} parentName=\"p\"></MDXTag>{`\n`}{`Suppose we move point's position from `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`(x, y)`}</MDXTag>{` to `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`(x', y')`}</MDXTag>{`:`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-math\"}}>{`x ' = x + t _ x\n`}</MDXTag></MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-math\"}}>{`y ' = y + t _ y\n`}</MDXTag></MDXTag>\n<MDXTag name=\"h5\" components={components}>{`Scale`}</MDXTag>\n<MDXTag name=\"p\" components={components}><MDXTag name=\"img\" components={components} parentName=\"p\" props={{\"src\":\"https://www.tutorialspoint.com/computer_graphics/images/before_scaling.jpg\",\"alt\":\"Image\"}}></MDXTag><MDXTag name=\"br\" components={components} parentName=\"p\"></MDXTag>{`\n`}<MDXTag name=\"img\" components={components} parentName=\"p\" props={{\"src\":\"https://www.tutorialspoint.com/computer_graphics/images/after_scaling.jpg\",\"alt\":\"Image\"}}></MDXTag><MDXTag name=\"br\" components={components} parentName=\"p\"></MDXTag>{`\n`}{`Suppose we scale the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`x`}</MDXTag>{` of point by `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`sx`}</MDXTag>{` times and the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`y`}</MDXTag>{` of point by `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`sy`}</MDXTag>{` times, then:`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-math\"}}>{`x ' = s _ x * x\n`}</MDXTag></MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-math\"}}>{`y ' = s _ y * y\n`}</MDXTag></MDXTag>\n<MDXTag name=\"blockquote\" components={components}>\n<MDXTag name=\"p\" components={components} parentName=\"blockquote\"><MDXTag name=\"strong\" components={components} parentName=\"p\">{`Scale point based on a center point `}<MDXTag name=\"inlineCode\" components={components} parentName=\"strong\">{`(xc, yc)`}</MDXTag></MDXTag></MDXTag>\n<MDXTag name=\"pre\" components={components} parentName=\"blockquote\"><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-math\"}}>{`x ' = s _ x * x - ( s _ x * x _ c - x _ c )\n`}</MDXTag></MDXTag>\n<MDXTag name=\"pre\" components={components} parentName=\"blockquote\"><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-math\"}}>{`y ' = s _ y * y - ( s _ y * y _ c - y _ c )\n`}</MDXTag></MDXTag>\n</MDXTag>\n<MDXTag name=\"h5\" components={components}>{`Rotation`}</MDXTag>\n<MDXTag name=\"p\" components={components}><MDXTag name=\"img\" components={components} parentName=\"p\" props={{\"src\":\"https://www.tutorialspoint.com/computer_graphics/images/rotation.jpg\",\"alt\":\"Image\"}}></MDXTag><MDXTag name=\"br\" components={components} parentName=\"p\"></MDXTag>{`\n`}{`Suppose we rotate `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`OP`}</MDXTag>{` to `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`OP'`}</MDXTag>{`.`}<MDXTag name=\"br\" components={components} parentName=\"p\"></MDXTag>{`\n`}{`Because:`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-math\"}}>{`x = r \\\\cdot cos \\\\varphi\n`}</MDXTag></MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-math\"}}>{`y = r \\\\cdot sin \\\\varphi\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`Then:`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-math\"}}>{`x' = r \\\\cdot cos ( \\\\varphi + \\\\theta ) = r \\\\cdot ( cos \\\\varphi \\\\cdot cos \\\\theta - sin \\\\varphi \\\\cdot sin \\\\theta ) = x \\\\cdot cos \\\\theta - y \\\\cdot sin \\\\theta\n`}</MDXTag></MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-math\"}}>{`y' = r \\\\cdot sin ( \\\\varphi + \\\\theta ) = r \\\\cdot ( sin \\\\varphi \\\\cdot cos \\\\theta + cos \\\\varphi \\\\cdot sin \\\\theta ) = x \\\\cdot sin \\\\theta + y \\\\cdot cos \\\\theta\n`}</MDXTag></MDXTag>\n<MDXTag name=\"blockquote\" components={components}>\n<MDXTag name=\"p\" components={components} parentName=\"blockquote\"><MDXTag name=\"strong\" components={components} parentName=\"p\">{`Rotate point based on a center point `}<MDXTag name=\"inlineCode\" components={components} parentName=\"strong\">{`(xc, yc)`}</MDXTag></MDXTag></MDXTag>\n<MDXTag name=\"pre\" components={components} parentName=\"blockquote\"><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-math\"}}>{`x' =  x \\\\cdot cos \\\\theta - y \\\\cdot sin \\\\theta + xc\n`}</MDXTag></MDXTag>\n<MDXTag name=\"pre\" components={components} parentName=\"blockquote\"><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-math\"}}>{`y' = x \\\\cdot sin \\\\theta + y \\\\cdot cos \\\\theta + yc\n`}</MDXTag></MDXTag>\n</MDXTag>\n<MDXTag name=\"h3\" components={components}>{`Point in polygon`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`In fact, there're two well-known \"point in polygon\" algorithms: `}<MDXTag name=\"strong\" components={components} parentName=\"p\">{`winding number`}</MDXTag>{` and `}<MDXTag name=\"strong\" components={components} parentName=\"p\">{`crossing number`}</MDXTag>{`, however, I will only talk about `}<MDXTag name=\"strong\" components={components} parentName=\"p\">{`winding number`}</MDXTag>{`, here are reasons:`}</MDXTag>\n<MDXTag name=\"table\" components={components}>\n<MDXTag name=\"thead\" components={components} parentName=\"table\">\n<MDXTag name=\"tr\" components={components} parentName=\"thead\">\n<MDXTag name=\"th\" components={components} parentName=\"tr\" props={{\"align\":null}}>{`/`}</MDXTag>\n<MDXTag name=\"th\" components={components} parentName=\"tr\" props={{\"align\":null}}>{`Rule`}</MDXTag>\n<MDXTag name=\"th\" components={components} parentName=\"tr\" props={{\"align\":null}}>{`Suitable Scene`}</MDXTag>\n</MDXTag>\n</MDXTag>\n<MDXTag name=\"tbody\" components={components} parentName=\"table\">\n<MDXTag name=\"tr\" components={components} parentName=\"tbody\">\n<MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\"align\":null}}><MDXTag name=\"strong\" components={components} parentName=\"td\">{`Winding`}</MDXTag>{` number`}</MDXTag>\n<MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\"align\":null}}><MDXTag name=\"a\" components={components} parentName=\"td\" props={{\"href\":\"https://en.wikipedia.org/wiki/Nonzero-rule\"}}>{`Nonezero-rule`}</MDXTag></MDXTag>\n<MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\"align\":null}}>{`All polygons`}</MDXTag>\n</MDXTag>\n<MDXTag name=\"tr\" components={components} parentName=\"tbody\">\n<MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\"align\":null}}>{`Crossing Number`}</MDXTag>\n<MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\"align\":null}}><MDXTag name=\"a\" components={components} parentName=\"td\" props={{\"href\":\"https://en.wikipedia.org/wiki/Even%E2%80%93odd_rule\"}}>{`Even-odd rule`}</MDXTag></MDXTag>\n<MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\"align\":null}}>{`Polygons with simple curves`}</MDXTag>\n</MDXTag>\n</MDXTag>\n</MDXTag>\n<MDXTag name=\"p\" components={components}>{`As we can see above, `}<MDXTag name=\"strong\" components={components} parentName=\"p\">{`crossing number`}</MDXTag>{` is not suitable for all polygons.`}</MDXTag>\n<MDXTag name=\"h5\" components={components}>{`Winding number`}</MDXTag>\n<MDXTag name=\"p\" components={components}><MDXTag name=\"img\" components={components} parentName=\"p\" props={{\"src\":\"https://upload.wikimedia.org/wikipedia/commons/8/8f/Winding_Number_Around_Point.svg\",\"alt\":\"Image\"}}></MDXTag><MDXTag name=\"br\" components={components} parentName=\"p\"></MDXTag>{`\n`}{`Draw an `}<MDXTag name=\"strong\" components={components} parentName=\"p\">{`infinite ray`}</MDXTag>{` from `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`P`}</MDXTag>{` crossing polygon, then count each `}<MDXTag name=\"strong\" components={components} parentName=\"p\">{`vertex`}</MDXTag>{`, here's the key: suppose we start at any point on polygon path and end at the same point to draw polygon `}<MDXTag name=\"strong\" components={components} parentName=\"p\">{`counterclockwise`}</MDXTag>{`, if the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`vector`}</MDXTag>{` intersected the `}<MDXTag name=\"strong\" components={components} parentName=\"p\">{`special vertex`}</MDXTag>{`(intersected by infinite ray and polygon) is `}<MDXTag name=\"strong\" components={components} parentName=\"p\">{`upward`}</MDXTag>{`, `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`wn`}</MDXTag>{` `}<MDXTag name=\"strong\" components={components} parentName=\"p\">{`adds `}<MDXTag name=\"inlineCode\" components={components} parentName=\"strong\">{`1`}</MDXTag></MDXTag>{`, otherwise if the track intersected vertex is `}<MDXTag name=\"strong\" components={components} parentName=\"p\">{`downward`}</MDXTag>{`, `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`wn`}</MDXTag>{` `}<MDXTag name=\"strong\" components={components} parentName=\"p\">{`subtracts `}<MDXTag name=\"inlineCode\" components={components} parentName=\"strong\">{`1`}</MDXTag></MDXTag>{`. If the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`wn`}</MDXTag>{` of `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`P`}</MDXTag>{` is not `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`0`}</MDXTag>{`, then `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`P`}</MDXTag>{` is `}<MDXTag name=\"strong\" components={components} parentName=\"p\">{`inside`}</MDXTag>{` of polygon, otherwise `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`P`}</MDXTag>{` is `}<MDXTag name=\"strong\" components={components} parentName=\"p\">{`outside`}</MDXTag>{`.`}<MDXTag name=\"br\" components={components} parentName=\"p\"></MDXTag>{`\n`}{`Main javascript(typescript) `}<MDXTag name=\"strong\" components={components} parentName=\"p\">{`codes`}</MDXTag>{`(If you want to see whole detail code, visit `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"https://github.com/Terry-Su/Geometry-Algorithm/blob/master/src/core/calcPointInPolygon.ts\"}}>{`here`}</MDXTag>{`):`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-ts\"}}>{`/**\n * Check if point P is inside of polygon with winding number algorithm\n * Algorithm: http://geomalgorithms.com/a03-_inclusion.html\n * @param {Point2D} P point P\n * @param {Point2D[]} polygonVertices vertices of polygon path in clockwise or counterclockwise order\n */\nfunction pointInPolygonWindingNumber(\n  P: Point2D,\n  polygonVertices: Point2D[]\n) {\n  /**\n   * Winding nunebr\n   */\n  let wn = 0\n\n  const points: Point2D[] = polygonVertices\n\n  for ( let i: number = 0; i < points.length - 1; i++ ) {\n    const V0: Point2D = points[ i ]\n    const V1: Point2D = points[ i + 1 ]\n\n    const { x: x0, y: y0 }: Point2D = V0\n    const { x: x1, y: y1 }: Point2D = V1\n    const { x: xp, y: yp }: Point2D = P\n\n    /**\n     * Upward\n     */\n    if ( y0 <= yp && y1 > yp && isLeft( V0, V1, P ) ) {\n      wn = wn + 1\n    }\n    /**\n     * Downward\n     */\n    if ( y0 > yp && y1 <= yp && isRight( V0, V1, P ) ) {\n      wn = wn - 1\n    }\n  }\n\n  const pointOnPolygonPath: boolean = isPointOnPolygonPath( P, points )\n  const res: boolean = pointOnPolygonPath || wn !== 0\n\n  return res\n}\n`}</MDXTag></MDXTag>\n<MDXTag name=\"h3\" components={components}>{`Matrix`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`I'm curious about matrices too, not only when learning geometry algorithms. Matrix, which like an magician, transforms geometry with its particular formula.`}</MDXTag>\n<MDXTag name=\"h5\" components={components}>{`Translation`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-math\"}}>{`\\\\begin{bmatrix}\n   x' \\\\\\\\\n   y'\n\\\\end{bmatrix}\n=\n\\\\begin{bmatrix}\n   x \\\\\\\\\n   y\n\\\\end{bmatrix}\n+\n\\\\begin{bmatrix}\n   tx \\\\\\\\\n   ty\n\\\\end{bmatrix}\n`}</MDXTag></MDXTag>\n<MDXTag name=\"h5\" components={components}>{`Scale`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-math\"}}>{`\\\\begin{bmatrix}\n   x' \\\\\\\\\n   y'\n\\\\end{bmatrix}\n=\n\\\\begin{bmatrix}\n   S _ x & 0 \\\\\\\\\n   0 & S _ y\n\\\\end{bmatrix}\n\\\\begin{bmatrix}\n   x \\\\\\\\\n   y\n\\\\end{bmatrix}\n`}</MDXTag></MDXTag>\n<MDXTag name=\"h5\" components={components}>{`Rotation`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-math\"}}>{`\\\\begin{bmatrix}\n   x' \\\\\\\\\n   y'\n\\\\end{bmatrix}\n=\n\\\\begin{bmatrix}\n  cos \\\\theta & -sin \\\\theta \\\\\\\\\n  sin \\\\theta & cos \\\\theta\n\\\\end{bmatrix}\n\\\\begin{bmatrix}\n   x \\\\\\\\\n   y\n\\\\end{bmatrix}\n`}</MDXTag></MDXTag>\n<MDXTag name=\"h3\" components={components}>{`Formulas`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`There are plenty of geometry algorithms, however, I only list several alogorithms which are `}<MDXTag name=\"strong\" components={components} parentName=\"p\">{`frequently used`}</MDXTag>{` above. Maybe, I say maybe, I will add new algorithms in this blog if I find new commonly used algorithm in the future.\nNevertheless, I'll still list some `}<MDXTag name=\"strong\" components={components} parentName=\"p\">{`practical`}</MDXTag>{` formulas which can be used for geometry calculation.`}</MDXTag>\n<MDXTag name=\"h5\" components={components}>{`The Cosine Law`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Suppose there are vector v and w`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-math\"}}>{`| v \\\\pm w | ^ 2 = | v | ^ 2 \\\\pm 2 | v | | w | cos( \\\\theta ) + | w | ^ 2\n`}</MDXTag></MDXTag>\n<MDXTag name=\"h5\" components={components}>{`The Dot Product`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`One vector multiply the other vector:`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-math\"}}>{`v \\\\cdot w = | v | | w | cos ( \\\\theta )\n`}</MDXTag></MDXTag>\n<MDXTag name=\"h5\" components={components}>{`The 2D Perp Product`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-math\"}}>{`v \\\\perp w = | v | | w | sin ( \\\\theta )\n`}</MDXTag></MDXTag>\n<MDXTag name=\"h5\" components={components}>{`Computing area`}</MDXTag>\n<MDXTag name=\"ul\" components={components}>\n<MDXTag name=\"li\" components={components} parentName=\"ul\">{`Parallelogram`}</MDXTag>\n</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-math\"}}>{`A ( \\\\Box ) = | v \\\\perp w | \n`}</MDXTag></MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-math\"}}>{`    = |v| |w| sin( \\\\theta )\n`}</MDXTag></MDXTag>\n<MDXTag name=\"ul\" components={components}>\n<MDXTag name=\"li\" components={components} parentName=\"ul\">{`Triangles`}</MDXTag>\n</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-math\"}}>{`A ( \\\\vartriangle ) = | v \\\\perp w | / 2t\n`}</MDXTag></MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-math\"}}>{`    = |v| |w| sin( \\\\theta ) / 2\n`}</MDXTag></MDXTag>\n<MDXTag name=\"h5\" components={components}>{`Lines formula`}</MDXTag>\n<MDXTag name=\"ul\" components={components}>\n<MDXTag name=\"li\" components={components} parentName=\"ul\">{`Type-Parametric`}</MDXTag>\n</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-math\"}}>{`P(t) = P _ 0 + t v _ L \n`}</MDXTag></MDXTag>\n<MDXTag name=\"ul\" components={components}>\n<MDXTag name=\"li\" components={components} parentName=\"ul\">{`Line equations`}</MDXTag>\n</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-math\"}}>{`P ( t ) = P _ 0 + t v _ L \n`}</MDXTag></MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-math\"}}>{`    = P _ 0 + t ( P _ 1 - P _ 0 )\n`}</MDXTag></MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-math\"}}>{`    = ( 1 - t ) P _ 0 + t P _ 1\n`}</MDXTag></MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-math\"}}>{`    = ( x _ 0 + t cos \\\\theta , y _ 0 + t sin \\\\theta ) \n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`It's easy to learn and use a geometry library, however, it's `}<MDXTag name=\"strong\" components={components} parentName=\"p\">{`limited`}</MDXTag>{` when we want to build a `}<MDXTag name=\"strong\" components={components} parentName=\"p\">{`large`}</MDXTag>{` or complex even just `}<MDXTag name=\"strong\" components={components} parentName=\"p\">{`a little complex project`}</MDXTag>{`. Grasping geometry algorithms will make it possible for us to create `}<MDXTag name=\"strong\" components={components} parentName=\"p\">{`flexible`}</MDXTag>{` and `}<MDXTag name=\"strong\" components={components} parentName=\"p\">{`large`}</MDXTag>{` geometry projects.`}</MDXTag>\n<MDXTag name=\"h3\" components={components}>{`Reference`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`[0]`}{` `}<MDXTag name=\"strong\" components={components} parentName=\"p\">{`Transformation:`}</MDXTag>{` `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"https://www.tutorialspoint.com/computer_graphics/2d_transformation.htm\"}}>{`https://www.tutorialspoint.com/computer_graphics/2d_transformation.htm`}</MDXTag><MDXTag name=\"br\" components={components} parentName=\"p\"></MDXTag>{`\n`}{`[1]`}{` `}<MDXTag name=\"strong\" components={components} parentName=\"p\">{`Point in polygon1:`}</MDXTag>{` `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"https://en.wikipedia.org/wiki/Point_in_polygon\"}}>{`https://en.wikipedia.org/wiki/Point_in_polygon`}</MDXTag><MDXTag name=\"br\" components={components} parentName=\"p\"></MDXTag>{`\n`}{`[2]`}{` `}<MDXTag name=\"strong\" components={components} parentName=\"p\">{`Point in polygon2:`}</MDXTag>{` `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"http://geomalgorithms.com/a03-_inclusion.html\"}}>{`http://geomalgorithms.com/a03-_inclusion.html`}</MDXTag><MDXTag name=\"br\" components={components} parentName=\"p\"></MDXTag>{`\n`}{`[3]`}{` `}<MDXTag name=\"strong\" components={components} parentName=\"p\">{`Nonezero-rule:`}</MDXTag>{` `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"https://en.wikipedia.org/wiki/Nonzero-rule\"}}>{`https://en.wikipedia.org/wiki/Nonzero-rule`}</MDXTag><MDXTag name=\"br\" components={components} parentName=\"p\"></MDXTag>{`\n`}{`[4]`}{` `}<MDXTag name=\"strong\" components={components} parentName=\"p\">{`Even-odd rule:`}</MDXTag>{` `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"https://en.wikipedia.org/wiki/Even%E2%80%93odd_rule\"}}>{`https://en.wikipedia.org/wiki/Even%E2%80%93odd_rule`}</MDXTag><MDXTag name=\"br\" components={components} parentName=\"p\"></MDXTag>{`\n`}{`[5]`}{` `}<MDXTag name=\"strong\" components={components} parentName=\"p\">{`Computing area:`}</MDXTag>{` `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"http://geomalgorithms.com/a01-_area.html\"}}>{`http://geomalgorithms.com/a01-_area.html`}</MDXTag><MDXTag name=\"br\" components={components} parentName=\"p\"></MDXTag>{`\n`}{`[6]`}{` `}<MDXTag name=\"strong\" components={components} parentName=\"p\">{`Line formula:`}</MDXTag>{` `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"http://geomalgorithms.com/a02-_lines.html\"}}>{`http://geomalgorithms.com/a02-_lines.html`}</MDXTag>{`  `}</MDXTag>\n           </MDXTag>\n  }\n}\nMDXContent.isMDXComponent = true\nrender( <MDXContent /> )\n  ","postTime":1518401220000,"comment":5,"availableOtherLocales":[],"componentTextMap":{},"siteTitle":"Geometry Algorithms in Javascript(Terry Su Blog)","siteMetaDescription":" Geometry Algorithms in Javascript Recently, I've been learning geo algorithms for developing a geometry library. However, I found that... (Terry Su Blog)","categoryTitle":"Category","postTimeTitle":"Post Time","reprintingNote":"Author all rights reserved reprint please indicate the source no commercial reprint","endingWords":"article.endingWords","githubCommentBase":"https://api.github.com/repos/terry-su/blogs/issues/","githubIssuePageBase":"https://github.com/Terry-Su/blogs/issues/","remarkDisqusComment":"https://terrysu.disqus.com/embed.js","texts":{"siteTitle":"Terry Su Blog","siteMetaDescription":"Terry Su's original front-end technology blog 4 years front-end shares popular front-end technology JavaScript ReactJS","categoryNewest":"Latest Blogs","navArticles":"ARTICLES","navAbout":"ABOUT"},"articleTexts":{"endingWordsExtra":"**Welcome to [star and subscribe](https://github.com/Terry-Su/blogs), to read my latest original front end technology blogs.**","qrcodeImageUrl":"","reprintingNote":"Author all rights reserved reprint please indicate the source no commercial reprint","category":"Category","postTime":"Post Time","githubIssuePageBase":"https://github.com/Terry-Su/blogs/issues/","githubCommentBase":"https://api.github.com/repos/terry-su/blogs/issues/","commentOnGithub":"Comment (by Github Issues)"},"markedEndingWordsExtra":"<p><strong>Welcome to <a href=\"https://github.com/Terry-Su/blogs\">star and subscribe</a>, to read my latest original front end technology blogs.</strong></p>"}}

</script>

  
    <script crossorigin src="https://unpkg.com/react@16/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/styled-components/dist/styled-components.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone@7.4.3/babel.min.js"></script>
    
  
  <script type="text/javascript" src="/bundle.js"></script></body>
</html>